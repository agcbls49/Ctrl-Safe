<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/CTRLSAFE_logo.png') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Ctrl+Safe</title>
</head>
<body>
    <!-- Title Bar -->
    <div class="title-bar text-3xl bg-yellow-300">
        <nav class="nav-links hover:font-bold selection:bg-black selection:text-white">
            <a href="{{ url_for('home') }}">Ctrl + Safe</a>
        </nav>
        <nav class="nav-links hover:font-bold selection:bg-black selection:text-white">
            <a href="{{ url_for('about') }}">About</a>
        </nav>
    </div>
    <div class="h-[5%]"></div>
    <div class="flex justify-center items-center text-3xl font-bold selection:bg-black selection:text-white">
        Ctrl + Safe
    </div>
    <div class="flex justify-center items-center text-2xl selection:bg-black selection:text-white">
        An automated tool that uses machine learning to detect 
        hate speech and cyberbullying in social media text.
    </div>
    <!-- Disclaimer  -->
    <div class="flex justify-center mt-6">
        <div class="w-full text-sm text-gray-600 text-center selection:bg-black selection:text-white">
            <p>
                <strong>Disclaimer:</strong> This tool is designed to detect hate speech and offensive content in both Tagalog and English, including instances of cyberbullying. 
                It is intended for informational and educational purposes only and is not guaranteed to be 100% accurate.<br>
                Predictions are based on patterns learned by the underlying machine learning model and may vary depending on the quality and context of the input text.<br>
                Some sentences may not be accurately classified due to nuances in language, context, slang, sarcasm, or mixed meanings. 
                Users are advised to exercise their own judgment when interpreting the results.
            </p>
        </div>
    </div>    
    <!-- Results Panel -->
    <div class="flex justify-center items-start" style="padding-top:10vh; gap:16px;">

        <!-- Left Column: Textarea + Button -->
        <form style="display:flex; flex-direction:column; gap:16px;" method="POST">
            <textarea name="input_text" rows="15" placeholder="Enter words to detect"
                class="p-6 text-xl resize-none border border-gray-300 rounded-xl 
                focus:outline-none focus:ring-2 focus:ring-black 
                selection:bg-black selection:text-white caret-black"
                style="width:600px; height:470px; padding-top:5px; padding-left:5px;">{{ request.form.input_text if request.method=='POST' else '' }}</textarea>
    
            <button type="submit" class="bg-yellow-300 hover:bg-yellow-400 active:bg-yellow-400 selection:bg-black selection:text-white"
                style="padding:10px; font-size:24px; font-weight:bold; color:black; border-radius:0.5rem; border:none; width:100%;">
                Detect Words
            </button>
        </form>
    
        <!-- Right Column: Result Panel -->
        <div class="result-panel border border-black rounded-xl p-4 text-2xl selection:bg-black selection:text-white
        flex flex-col justify-center items-center"
            style="width:600px; height:calc(470px + 58px); /* textarea height + button height */
                   padding-top:5px; padding-left:5px; border-width:2px;">
            <div class="text-center text-3xl">
                {% if prediction %}
                <div class="{% if prediction.label == 'Hate/Offensive' or prediction.label == 'Likely Cyberbullying' %}text-red-600{% else %}text-green-600{% endif %}">
                    {{ prediction.label }}
                    </div>
                    <div class="{% if prediction.label == 'Hate/Offensive' or prediction.label == 'Likely Cyberbullying' %}text-red-600{% else %}text-green-600{% endif %}">
                        {{ prediction.probability }}%
                    </div>
                {% else %}
                    <div class="text-green-600">
                        No Hate Speech Detected
                    </div>
                    <div class="text-green-600">
                        0.00%
                    </div>
                {% endif %}
            </div>
        </div>
    </div>    
    <div class="h-[10%]"></div>
</body>
</html>